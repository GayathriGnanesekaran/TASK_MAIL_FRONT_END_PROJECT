<!-- Header Section -->
<div class="header-container d-flex justify-content-between align-items-center px-4 py-3 shadow-sm">
  <!-- Logo -->
  <div class="logo">
    <img src="../../assets/simplesolve_inc__logo (1).jpg" alt="Logo" class="logo-img" style="height: 45px;">
  </div>

  <!-- Right Section -->
  <div class="right-section d-flex align-items-center gap-4">
    <div class="user-info text-end">
      <div class="button-group d-flex gap-2">
        <button class="btn btn-outline-primary btn-sm" (click)="saveSelectedTasks()">Save</button>
        <button class="btn btn-outline-secondary btn-sm">View</button>
        <button class="btn btn-outline-success btn-sm">Edit</button>
      </div>
      <div class="mt-1 small fw-bold ">{{ username }} ({{ email }})</div>
    </div>
  </div>
</div>

<!-- Table Section -->
<div class="container-fluid px-4 mt-4">
  <!-- <h5 class="text-center mb-3 text-primary">Welcome {{ username }} ({{ email }})</h5> -->

  <form [formGroup]="taskForm">
    <div class="table-responsive table-container shadow-sm">
      <table class="table table-bordered table-sm align-middle">
        <thead class="label-color">
          <tr>
            <th>Select</th>
            <th>S.No</th>
            <th>Project</th>
            <th>Sprint</th>
            <th>Task Name *</th>
            <th>Type</th>
            <th>SOW/Issue No</th>
            <th>Is Billable</th>
            <th>Billing Type</th>
            <th>Res. Name</th>
            <th>Team</th>
            <th>Est. Start Dt</th>
            <th>Est. End Dt</th>
            <th>Est. Hours</th>
            <th>Act. Start Dt</th>
            <th>Act. End Dt</th>
            <th>Start Time</th>
            <th>End Time</th>
            <th>Act. Hours</th>
            <th>%</th>
            <th>Status</th>
            <th>Comments</th>
          </tr>
        </thead>
        <tbody formArrayName="tasks">
          <tr *ngFor="let task of tasks.controls; let i = index" [formGroupName]="i">
            <td><input type="checkbox" formControlName="selected" /></td>
            <td><input type="text" formControlName="sno" /></td>
            <td>
              <select formControlName="project">
                <option value="">--Select--</option>
                <option *ngFor="let proj of projectOptions" [value]="proj">{{ proj }}</option>
              </select>
            </td>
            <td><input type="text" formControlName="sprint" /></td>
            <td><input type="text" formControlName="taskName" required /></td>
            <td>
              <select formControlName="type">
                <option value="">--Select--</option>
                <option *ngFor="let type of typeOptions" [value]="type">{{ type }}</option>
              </select>
            </td>
            <td><input type="text" formControlName="sowIssueNo" /></td>
            <td>
              <select formControlName="isBillable">
                <option value="">--Select--</option>
                <option *ngFor="let opt of isBillableOptions" [value]="opt">{{ opt }}</option>
              </select>
            </td>
            <td>
              <select formControlName="billingType">
                <option value="">--Select--</option>
                <option *ngFor="let bill of billingTypeOptions" [value]="bill">{{ bill }}</option>
              </select>
            </td>
            <td><input type="text" formControlName="resName" /></td>
            <td><input type="text" formControlName="team" /></td>  
            <td><input type="date" formControlName="estStartDate" /></td>
            <td><input type="date" formControlName="estEndDate" /></td>
            <td><input type="text" formControlName="estHours" /></td>
            <td><input type="date" formControlName="actStartDate" /></td>
            <td><input type="date" formControlName="actEndDate" /></td>
            <td><input type="time" formControlName="startTime" /></td>
            <td><input type="time" formControlName="endTime" /></td>
            <td><input type="text" formControlName="actHours" /></td>
            <td><input type="text" formControlName="percentage" /></td>
            <td><input type="text" formControlName="status" /></td>
            <td><input type="text" formControlName="comments" /></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Error message -->
    <div *ngIf="showError" class="error-msg text-danger mt-2">Please fill "Task Name" for selected rows before saving.</div>

    <!-- Bottom Save Button -->
    <div class="text-center mt-3 mb-5">
      <button type="button" class="btn btn-primary px-4" (click)="saveSelectedTasks()">Save Selected Rows</button>
    </div>
  </form>
</div>